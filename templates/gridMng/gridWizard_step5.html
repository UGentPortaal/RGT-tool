{% extends 'layout.html' %}
{% load wizard_extras %}

{% block title %}
	RGT | Grids - Wizard
{% endblock %}

{% block javascript %}
<script type="text/javascript">
$(document).ready(function() {
	$('#alt-list').change(function(event) {
		$('.rating-input').each(function(index) {
			console.log($(this));
		});
	});
});
</script>
{% endblock javascript %}

{% block content %}
{% if not user.is_active %}
	<div id="verify-message">
		<p>Please verify your email in order to use this part of the application! Thank you!</p>
	</div>
{% else %}
	<p>Step {{ wizard.steps.step1 }} of {{ wizard.steps.count }}</p>
	<form action="" method="post">{% csrf_token %}
	<table>
	{{ wizard.management_form }}
	{% if wizard.form.forms %}
	    {{ wizard.form.management_form }}
	    {% for form in wizard.form.forms %}
	        {{ form }}
	    {% endfor %}
	{% else %}
		{{ alternatives_data|length }} {{ concerns_data|length }} {{ wizard.form.fields|length }}
	    <div id="step-header">
	    	<p>Please select an alternative that you want to rate. Then insert a rating for each concern.</p>
	    </div>
	    <div id="alt-sel">
	    	<select id="alt-list">
	    		<option></option>
	    		{% for alternative in alternatives_data|sort_dict_by_key %}
	    			<option id="{{ alternative.0 }}">{{ alternative.1 }}</option>
	    		{% endfor %}
	    	</select>
	    </div>
	    <div id="concern-list">
	    	{% for concern in concerns_data|sort_dict_by_key %}
	    		{{ concern.0 }} - {{ concern.1 }}
	    		{% if forloop.counter|divisibleby:"2" %}
	    			<input type="text" name="" id="" class="rating-input" />
	    		{% endif %}
	    	{% endfor %}
	    </div>
	{% endif %}
	</table>
	{% if wizard.steps.prev %}
	<button name="wizard_goto_step" type="submit" value="{{ wizard.steps.first }}">first step</button>
	<button name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}">prev step</button>
	<button name="wizard_goto_step" type="submit" value="{{ wizard.steps.next }}">next step</button>
	<button name="wizard_goto_step" type="submit" value="{{ wizard.steps.last }}">last step</button>
	{% endif %}
	<input type="submit" value="submit"/>
	</form>
{% endif %}
{% endblock %}